

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/images/ico/go.ico">
  <link rel="icon" href="/images/ico/go.ico">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="myHikari">
  <meta name="keywords" content="">
  
    <meta name="description" content="设计模式六大原则1、开放封闭原则 Open Close Principle  OCP：尽量通过扩展软件实体来解决需求变化，而不是通过修改已有的代码来完成变化 OCP 原则要求设计者在需要修改现有代码时，不应该直接修改已有的代码，而是应该通过扩展现有代码来实现新的功能或修改。 代码实例： 实现计算机：Operation 是策略接口，定义一个 calculate 方法用于执行数学运算。Addition">
<meta property="og:type" content="article">
<meta property="og:title" content="designModel">
<meta property="og:url" content="http://myhikari.github.io/2024/04/25/designModel/index.html">
<meta property="og:site_name" content="myHikari">
<meta property="og:description" content="设计模式六大原则1、开放封闭原则 Open Close Principle  OCP：尽量通过扩展软件实体来解决需求变化，而不是通过修改已有的代码来完成变化 OCP 原则要求设计者在需要修改现有代码时，不应该直接修改已有的代码，而是应该通过扩展现有代码来实现新的功能或修改。 代码实例： 实现计算机：Operation 是策略接口，定义一个 calculate 方法用于执行数学运算。Addition">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2024-04-25T06:10:56.000Z">
<meta property="article:modified_time" content="2024-04-25T06:12:30.533Z">
<meta property="article:author" content="myHikari">
<meta property="article:tag" content="设计模式">
<meta name="twitter:card" content="summary_large_image">
  
  
  
  <title>designModel - myHikari</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"myhikari.github.io","root":"/","version":"1.9.7","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 7.2.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>myHiakri</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/images/bg/alice.jpg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="designModel"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2024-04-25 14:10" pubdate>
          2024年4月25日 下午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          13k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          113 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">designModel</h1>
            
            
              <div class="markdown-body">
                
                <h1 id="设计模式"><a href="#设计模式" class="headerlink" title="设计模式"></a>设计模式</h1><h2 id="六大原则"><a href="#六大原则" class="headerlink" title="六大原则"></a>六大原则</h2><h3 id="1、开放封闭原则"><a href="#1、开放封闭原则" class="headerlink" title="1、开放封闭原则"></a>1、开放封闭原则</h3><blockquote>
<p><strong>Open Close Principle</strong></p>
</blockquote>
<p>OCP：尽量通过扩展软件实体来解决需求变化，而不是通过修改已有的代码来完成变化</p>
<p>OCP 原则要求设计者在需要修改现有代码时，不应该直接修改已有的代码，而是应该通过扩展现有代码来实现新的功能或修改。</p>
<p>代码实例：</p>
<p>实现计算机：<code>Operation</code> 是策略接口，定义一个 <code>calculate</code> 方法用于执行数学运算。<code>Addition</code> 和 <code>Subtraction</code> 是具体策略类，分别实现了加法和减法运算。<code>Calculator</code> 是上下文类，持有一个 <code>Operation</code> 对象，可以通过设置不同的策略对象来改变其行为。当需要添加新的数学运算时，只需要创建新的具体策略类，并在上下文中设置新的策略对象，而不需要修改现有的代码。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 策略接口</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Operation</span> &#123;<br>    <span class="hljs-type">int</span> <span class="hljs-title function_">calculate</span><span class="hljs-params">(<span class="hljs-type">int</span> num1, <span class="hljs-type">int</span> num2)</span>;<br>&#125;<br><br><span class="hljs-comment">// 具体策略类：加法操作</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Addition</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Operation</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">calculate</span><span class="hljs-params">(<span class="hljs-type">int</span> num1, <span class="hljs-type">int</span> num2)</span> &#123;<br>        <span class="hljs-keyword">return</span> num1 + num2;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 具体策略类：减法操作</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Subtraction</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Operation</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">calculate</span><span class="hljs-params">(<span class="hljs-type">int</span> num1, <span class="hljs-type">int</span> num2)</span> &#123;<br>        <span class="hljs-keyword">return</span> num1 - num2;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 上下文类</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Calculator</span> &#123;<br>    <span class="hljs-keyword">private</span> Operation operation;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setOperation</span><span class="hljs-params">(Operation operation)</span> &#123;<br>        <span class="hljs-built_in">this</span>.operation = operation;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">performOperation</span><span class="hljs-params">(<span class="hljs-type">int</span> num1, <span class="hljs-type">int</span> num2)</span> &#123;<br>        <span class="hljs-keyword">if</span> (operation == <span class="hljs-literal">null</span>) &#123;<br>            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">IllegalStateException</span>(<span class="hljs-string">&quot;Operation not set&quot;</span>);<br>        &#125;<br>        <span class="hljs-keyword">return</span> operation.calculate(num1, num2);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 客户端</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Calculator</span> <span class="hljs-variable">calculator</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Calculator</span>();<br><br>        <span class="hljs-comment">// 使用加法操作</span><br>        calculator.setOperation(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Addition</span>());<br>        <span class="hljs-type">int</span> <span class="hljs-variable">result1</span> <span class="hljs-operator">=</span> calculator.performOperation(<span class="hljs-number">5</span>, <span class="hljs-number">3</span>);<br>        System.out.println(<span class="hljs-string">&quot;5 + 3 = &quot;</span> + result1);<br><br>        <span class="hljs-comment">// 使用减法操作</span><br>        calculator.setOperation(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Subtraction</span>());<br>        <span class="hljs-type">int</span> <span class="hljs-variable">result2</span> <span class="hljs-operator">=</span> calculator.performOperation(<span class="hljs-number">8</span>, <span class="hljs-number">4</span>);<br>        System.out.println(<span class="hljs-string">&quot;8 - 4 = &quot;</span> + result2);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="2、里氏代换原则"><a href="#2、里氏代换原则" class="headerlink" title="2、里氏代换原则"></a>2、里氏代换原则</h3><blockquote>
<p><strong>Liskov Substitution Principle</strong></p>
</blockquote>
<p>LSP：在使用基类的任何地方都可以替换为使用其继承的子类，即完美的替换基类。</p>
<p>LSP 原则要求子类型（派生类或子类）必须能够替换其基类型（基类或父类）的任何地方，而不破坏程序的正确性。</p>
<p>代码实例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Animal</span> &#123;<br>    <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">makeSound</span><span class="hljs-params">()</span>;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Dog</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Animal</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">makeSound</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Dog barks&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Cat</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Animal</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">makeSound</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Cat meows&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Animal</span> <span class="hljs-variable">dog</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Dog</span>();<br>        <span class="hljs-type">Animal</span> <span class="hljs-variable">cat</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cat</span>();<br><br>        <span class="hljs-comment">// 里氏代换原则：可以在任何需要 Animal 类型的地方使用 Dog 或 Cat 类的对象</span><br>        dog.makeSound();<br>        cat.makeSound();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="3、依赖倒转原则"><a href="#3、依赖倒转原则" class="headerlink" title="3、依赖倒转原则"></a>3、依赖倒转原则</h3><blockquote>
<p><strong>Dependence Inversion Principle</strong></p>
</blockquote>
<p>DIP 原则：</p>
<ol>
<li>高层模块不应该依赖于低层模块，二者都应该依赖于抽象。</li>
<li>抽象不应该依赖于具体实现，具体实现应该依赖于抽象。</li>
</ol>
<p>DIP 原则指导着建立松耦合的软件架构，使得高层模块不依赖于低层模块的具体实现细节，而是依赖于抽象。</p>
<p>该原则的核心思想是通过抽象来实现模块之间的松耦合，从而提高代码的灵活性和可维护性。当系统需要进行变更时，可以通过替换具体实现而不影响高层模块的代码。</p>
<p>代码实例：</p>
<p>考虑一个简单的电灯类和电灯开关类的依赖关系，根据依赖倒转原则，我们应该抽象出一个开关接口，电灯类依赖于这个开关接口，而不是具体的开关实现。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 开关接口</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Switch</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">turnOn</span><span class="hljs-params">()</span>;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">turnOff</span><span class="hljs-params">()</span>;<br>&#125;<br><br><span class="hljs-comment">// 电灯类</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Light</span> &#123;<br>    <span class="hljs-keyword">private</span> Switch switcher;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Light</span><span class="hljs-params">(Switch switcher)</span> &#123;<br>        <span class="hljs-built_in">this</span>.switcher = switcher;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">toggle</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span> (switcher != <span class="hljs-literal">null</span>) &#123;<br>            switcher.turnOn();<br>            switcher.turnOff();<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 电灯开关类</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">LightSwitch</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Switch</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">turnOn</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Light is on&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">turnOff</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Light is off&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 客户端代码</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Switch</span> <span class="hljs-variable">lightSwitch</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">LightSwitch</span>();<br>        <span class="hljs-type">Light</span> <span class="hljs-variable">light</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Light</span>(lightSwitch);<br><br>        light.toggle();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="4、接口隔离原则"><a href="#4、接口隔离原则" class="headerlink" title="4、接口隔离原则"></a>4、接口隔离原则</h3><blockquote>
<p><strong>Interface Segregation Principle</strong></p>
</blockquote>
<p>ISP 原则强调接口的独立性和单一性，即客户端不应该强制依赖于其不需要的接口。</p>
<p>ISP 原则要求将大接口拆分为多个小接口，客户端只依赖于它们需要的接口，而不需要依赖于不需要的接口。如此可避免不必要的依赖，降低耦合度，提高代码的灵活性和可维护性。</p>
<p>代码实例：</p>
<p>考虑一个简单的打印机应用程序，它有一个打印机类 <code>Printer</code>，可以打印文本和图像。按照接口隔离原则，我们应该将打印文本和打印图像的功能分别定义在两个接口中，而不是定义在同一个接口中。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 打印文本接口</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">TextPrinter</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">printText</span><span class="hljs-params">(String text)</span>;<br>&#125;<br><br><span class="hljs-comment">// 打印图像接口</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">ImagePrinter</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">printImage</span><span class="hljs-params">(String imageUrl)</span>;<br>&#125;<br><br><span class="hljs-comment">// 打印机类实现打印文本接口和打印图像接口</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Printer</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">TextPrinter</span>, ImagePrinter &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printText</span><span class="hljs-params">(String text)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Printing text: &quot;</span> + text);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">printImage</span><span class="hljs-params">(String imageUrl)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Printing image: &quot;</span> + imageUrl);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Printer</span> <span class="hljs-variable">printer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Printer</span>();<br><br>        <span class="hljs-comment">// 打印文本</span><br>        printer.printText(<span class="hljs-string">&quot;Hello, World!&quot;</span>);<br><br>        <span class="hljs-comment">// 打印图像</span><br>        printer.printImage(<span class="hljs-string">&quot;https://example.com/image.png&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="5、迪米特法则"><a href="#5、迪米特法则" class="headerlink" title="5、迪米特法则"></a>5、迪米特法则</h3><blockquote>
<p><strong>Demeter Principle</strong></p>
<p><strong>迪米特法则，又称为最少知道原则（Law of Demeter，LoD）</strong></p>
</blockquote>
<p>该原则的核心思想是一个对象应当对其他对象有尽可能少的了解，即对象之间应该保持松散的耦合关系。</p>
<p>迪米特法则可以概括为以下几点：</p>
<ol>
<li>每个单元（类、模块、函数等）只应该与其密切相关的对象进行交互，而不是与一大堆不相关的对象进行交互。</li>
<li>类之间的通信应该通过最直接的方式进行，避免通过中间多层的对象进行传递消息。</li>
<li>不要让一个单元了解整个系统的结构，而应该只关注与之直接交互的对象。</li>
</ol>
<p>迪米特法则的目的是降低系统的耦合度，提高系统的灵活性和可维护性。通过减少对象之间的直接联系，可以使得系统的各个模块更容易被独立开发、测试、维护和重用。</p>
<p>代码实例：</p>
<p>考虑一个购物车系统，其中包含商品、购物车和订单三个类。按照迪米特法则，购物车类应该尽可能少地了解商品类和订单类的内部结构，而是通过商品类和订单类提供的接口进行交互。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 商品类</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Product</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">double</span> price;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Product</span><span class="hljs-params">(String name, <span class="hljs-type">double</span> price)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>        <span class="hljs-built_in">this</span>.price = price;<br>    &#125;<br><br>    <span class="hljs-comment">// 其他方法...</span><br>&#125;<br><br><span class="hljs-comment">// 订单类</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Order</span> &#123;<br>    <span class="hljs-keyword">private</span> List&lt;Product&gt; products;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Order</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-built_in">this</span>.products = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addProduct</span><span class="hljs-params">(Product product)</span> &#123;<br>        products.add(product);<br>    &#125;<br><br>    <span class="hljs-comment">// 其他方法...</span><br>&#125;<br><br><span class="hljs-comment">// 购物车类</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ShoppingCart</span> &#123;<br>    <span class="hljs-keyword">private</span> List&lt;Product&gt; products;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ShoppingCart</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-built_in">this</span>.products = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">addProduct</span><span class="hljs-params">(Product product)</span> &#123;<br>        products.add(product);<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">checkout</span><span class="hljs-params">(Order order)</span> &#123;<br>        <span class="hljs-keyword">for</span> (Product product : products) &#123;<br>            order.addProduct(product);<br>        &#125;<br>        products.clear();<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Product</span> <span class="hljs-variable">product1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Product</span>(<span class="hljs-string">&quot;iPhone&quot;</span>, <span class="hljs-number">999.99</span>);<br>        <span class="hljs-type">Product</span> <span class="hljs-variable">product2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Product</span>(<span class="hljs-string">&quot;iPad&quot;</span>, <span class="hljs-number">699.99</span>);<br><br>        <span class="hljs-type">ShoppingCart</span> <span class="hljs-variable">cart</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ShoppingCart</span>();<br>        cart.addProduct(product1);<br>        cart.addProduct(product2);<br><br>        <span class="hljs-type">Order</span> <span class="hljs-variable">order</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Order</span>();<br>        cart.checkout(order);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="6、单一职责原则"><a href="#6、单一职责原则" class="headerlink" title="6、单一职责原则"></a>6、单一职责原则</h3><blockquote>
<p><strong>Principle of single responsibility</strong></p>
</blockquote>
<p>SRP 原则指出一个类或模块应该有且只有一个引起它变化的原因，或者说一个类或模块应该只负责一种职责。</p>
<p>SRP 原则要求一个类或模块只做一件事情，并且做好这件事情。如果一个类或模块负责了多个不同的职责，那么它的设计就不够清晰，也不够灵活。</p>
<p>遵循 SRP 原则有助于提高代码的内聚性，即相关功能应该放在一起，不相关功能应该分开。</p>
<p>代码实例：</p>
<p>考虑一个简单的日志记录器类 <code>Logger</code>，它负责将日志信息记录到文件和控制台。按照单一职责原则，我们应该将文件日志记录和控制台日志记录分别放在两个类中。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 日志记录器类</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Logger</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">logToFile</span><span class="hljs-params">(String message)</span> &#123;<br>        <span class="hljs-comment">// 将日志信息记录到文件</span><br>        System.out.println(<span class="hljs-string">&quot;Log to file: &quot;</span> + message);<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">logToConsole</span><span class="hljs-params">(String message)</span> &#123;<br>        <span class="hljs-comment">// 将日志信息记录到控制台</span><br>        System.out.println(<span class="hljs-string">&quot;Log to console: &quot;</span> + message);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 文件日志记录器类</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">FileLogger</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">log</span><span class="hljs-params">(String message)</span> &#123;<br>        <span class="hljs-comment">// 将日志信息记录到文件</span><br>        System.out.println(<span class="hljs-string">&quot;Log to file: &quot;</span> + message);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 控制台日志记录器类</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConsoleLogger</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">log</span><span class="hljs-params">(String message)</span> &#123;<br>        <span class="hljs-comment">// 将日志信息记录到控制台</span><br>        System.out.println(<span class="hljs-string">&quot;Log to console: &quot;</span> + message);<br>    &#125;<br>&#125;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">FileLogger</span> <span class="hljs-variable">fileLogger</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileLogger</span>();<br>        fileLogger.log(<span class="hljs-string">&quot;Error: File not found&quot;</span>);<br><br>        <span class="hljs-type">ConsoleLogger</span> <span class="hljs-variable">consoleLogger</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConsoleLogger</span>();<br>        consoleLogger.log(<span class="hljs-string">&quot;Warning: Memory is running low&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="GRASP-模式"><a href="#GRASP-模式" class="headerlink" title="GRASP 模式"></a>GRASP 模式</h2><blockquote>
<p>General Responsibility Assignment Software Patterns ，即”通用责任分配软件模式”</p>
<p>面向对象设计中常用的设计原则</p>
</blockquote>
<p>GRASP 模式旨在帮助设计者更好地分配类（对象）的职责，使得系统更加易于理解、扩展和维护</p>
<h3 id="专家模式"><a href="#专家模式" class="headerlink" title="专家模式"></a>专家模式</h3><p>任务应该分配给具有最多所需信息的类。即一个对象应该包含或掌握与其任务相关的信息。</p>
<h3 id="创造者原则"><a href="#创造者原则" class="headerlink" title="创造者原则"></a>创造者原则</h3><p>当一个类 A 需要创建另一个类 B 的实例时，类 A 应该是类 B 的聚合体，组合体，或者类 A 持有类 B 的引用。避免在类 A 中直接实例化类 B。</p>
<h3 id="低耦合原则"><a href="#低耦合原则" class="headerlink" title="低耦合原则"></a>低耦合原则</h3><blockquote>
<p><strong>耦合（Coupling）</strong>：耦合描述模块之间的依赖关系。</p>
<p>高耦合意味着模块之间的依赖性很强，一个模块的修改可能会导致其他模块的修改。</p>
<p>低耦合意味着模块之间的依赖性很弱，一个模块的修改不太可能影响其他模块。</p>
</blockquote>
<p>在软件设计中，耦合指的是模块间的依赖关系。低耦合意味着模块间的依赖关系越少越好，这样修改一个模块不会影响其他模块。</p>
<h3 id="高内聚原则"><a href="#高内聚原则" class="headerlink" title="高内聚原则"></a>高内聚原则</h3><blockquote>
<p><strong>内聚（Cohesion）</strong>：内聚描述模块内部元素之间的关联程度，即一个模块内部各个元素（如方法、属性等）彼此之间的联系。</p>
<p>高内聚意味着模块内的元素彼此之间关联紧密，每个模块只负责一项清晰的任务。</p>
<p>低内聚意味着模块内的元素关联性较弱，模块可能会包含多种不相关的功能。</p>
</blockquote>
<p>一个模块内的各个元素彼此关联紧密，只负责一个清晰的任务。高内聚的模块更容易理解、维护和重用。</p>
<h3 id="控制器原则"><a href="#控制器原则" class="headerlink" title="控制器原则"></a>控制器原则</h3><p>确定哪个类或对象负责接收用户输入、协调系统操作，并作出相应的响应。控制器将用户请求转发给适当的对象来处理。</p>
<h3 id="多态原则"><a href="#多态原则" class="headerlink" title="多态原则"></a>多态原则</h3><p>通过继承和接口实现多态性，允许不同的对象对同一消息作出不同的响应。</p>
<h3 id="纯虚构"><a href="#纯虚构" class="headerlink" title="纯虚构"></a>纯虚构</h3><p>为了降低耦合度，创建一个新的类或对象来处理系统中的特定任务，而不受现有领域对象的限制。</p>
<h3 id="中介原则"><a href="#中介原则" class="headerlink" title="中介原则"></a>中介原则</h3><p>引入一个中介者来管理对象之间的通信，减少对象之间的直接依赖关系。</p>
<h3 id="受保护变量原则"><a href="#受保护变量原则" class="headerlink" title="受保护变量原则"></a>受保护变量原则</h3><p>通过封装和抽象，保护系统中易变的部分，使得系统对变化的影响最小化。</p>
<h2 id="设计模式分类"><a href="#设计模式分类" class="headerlink" title="设计模式分类"></a>设计模式分类</h2><h3 id="创建型模式"><a href="#创建型模式" class="headerlink" title="创建型模式"></a>创建型模式</h3><ol>
<li>工厂方法模式：将对象的创建和使用分离开来，客户端只需要知道工厂方法，而不需要知道具体的产品类。</li>
<li>抽象工厂模式：提供一个接口，用于创建相关或依赖对象的家族，而不需要指定具体的类。</li>
<li>建造者模式：将一个复杂对象的构建过程与其表示分离开来，使得同样的构建过程可以创建不同的表示。</li>
<li>单例模式：确保某个类只有一个实例，并提供一个全局访问点来访问该实例。</li>
<li>原型模式：通过复制现有对象来创建新对象，而不是通过实例化类来创建对象。</li>
</ol>
<h4 id="1、工厂方法模式"><a href="#1、工厂方法模式" class="headerlink" title="1、工厂方法模式"></a>1、工厂方法模式</h4><p>将对象的创建和使用分离开来，客户端只需要知道工厂方法，而不需要知道具体的产品类。</p>
<p>工厂方法模式包括以下几个角色：</p>
<ol>
<li><strong>抽象产品（Product）</strong>：定义了产品的接口，是工厂方法所创建的对象的父类。</li>
<li><strong>具体产品（Concrete Product）</strong>：实现了抽象产品接口的具体类。</li>
<li><strong>抽象工厂（Creator）</strong>：定义了一个抽象的工厂方法，用于创建产品对象。通常是一个抽象类，其中可能包含一些通用的逻辑代码。</li>
<li><strong>具体工厂（Concrete Creator）</strong>：继承自抽象工厂，实现了工厂方法，用于创建具体的产品对象。</li>
</ol>
<p>以下是一个简单的工厂方法模式的示例（以创建不同类型的日志记录器为例）：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 抽象产品</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Logger</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">log</span><span class="hljs-params">(String message)</span>;<br>&#125;<br><br><span class="hljs-comment">// 具体产品 - 文件日志记录器</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">FileLogger</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Logger</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">log</span><span class="hljs-params">(String message)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Log message to file: &quot;</span> + message);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 具体产品 - 数据库日志记录器</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">DatabaseLogger</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Logger</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">log</span><span class="hljs-params">(String message)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Log message to database: &quot;</span> + message);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 抽象工厂</span><br><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LoggerFactory</span> &#123;<br>    <span class="hljs-keyword">abstract</span> Logger <span class="hljs-title function_">createLogger</span><span class="hljs-params">()</span>;<br>&#125;<br><br><span class="hljs-comment">// 具体工厂 - 文件日志记录器工厂</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">FileLoggerFactory</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">LoggerFactory</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    Logger <span class="hljs-title function_">createLogger</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileLogger</span>();<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 具体工厂 - 数据库日志记录器工厂</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">DatabaseLoggerFactory</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">LoggerFactory</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    Logger <span class="hljs-title function_">createLogger</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DatabaseLogger</span>();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="2、抽象工厂模式"><a href="#2、抽象工厂模式" class="headerlink" title="2、抽象工厂模式"></a>2、抽象工厂模式</h4><p>提供一个接口，用于创建相关或依赖对象的家族，而不需要指定具体的类。</p>
<p>抽象工厂模式包含以下几个角色：</p>
<ol>
<li><strong>抽象工厂（Abstract Factory）</strong>：定义了创建产品对象的方法接口，它是工厂方法模式的升级版，用于创建一系列相关或依赖对象的家族。</li>
<li><strong>具体工厂（Concrete Factory）</strong>：实现了抽象工厂接口，用于创建具体的产品对象。</li>
<li><strong>抽象产品（Abstract Product）</strong>：定义了产品对象的接口，是具体产品对象的父类。</li>
<li><strong>具体产品（Concrete Product）</strong>：实现了抽象产品接口，是被具体工厂创建的对象。</li>
</ol>
<p>抽象工厂模式将每个具体工厂与一组具体产品相关联，这样客户端就可以通过选择不同的具体工厂来创建不同类型的产品对象，从而实现了一种产品族的配置。</p>
<p>以下是一个简单的抽象工厂模式的示例（以创建不同类型的手机和配件为例）：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 抽象产品A - 手机</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Phone</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">make</span><span class="hljs-params">()</span>;<br>&#125;<br><br><span class="hljs-comment">// 具体产品A - 苹果手机</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ApplePhone</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Phone</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">make</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Make Apple Phone&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 具体产品A - 华为手机</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">HuaweiPhone</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Phone</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">make</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Make Huawei Phone&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 抽象产品B - 手机配件</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">PhoneAccessory</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">produce</span><span class="hljs-params">()</span>;<br>&#125;<br><br><span class="hljs-comment">// 具体产品B - 苹果手机配件</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AppleAccessory</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">PhoneAccessory</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">produce</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Produce Apple Accessory&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 具体产品B - 华为手机配件</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">HuaweiAccessory</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">PhoneAccessory</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">produce</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Produce Huawei Accessory&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 抽象工厂</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">PhoneFactory</span> &#123;<br>    Phone <span class="hljs-title function_">createPhone</span><span class="hljs-params">()</span>;<br>    PhoneAccessory <span class="hljs-title function_">createPhoneAccessory</span><span class="hljs-params">()</span>;<br>&#125;<br><br><span class="hljs-comment">// 具体工厂A - 苹果手机工厂</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AppleFactory</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">PhoneFactory</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Phone <span class="hljs-title function_">createPhone</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ApplePhone</span>();<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> PhoneAccessory <span class="hljs-title function_">createPhoneAccessory</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">AppleAccessory</span>();<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 具体工厂B - 华为手机工厂</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">HuaweiFactory</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">PhoneFactory</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Phone <span class="hljs-title function_">createPhone</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HuaweiPhone</span>();<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> PhoneAccessory <span class="hljs-title function_">createPhoneAccessory</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">HuaweiAccessory</span>();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="3、建造者模式"><a href="#3、建造者模式" class="headerlink" title="3、建造者模式"></a>3、建造者模式</h4><p>将一个复杂对象的构建过程与其表示分离开来，使得同样的构建过程可以创建不同的表示。</p>
<p>建造者模式包含以下几个角色：</p>
<ol>
<li><strong>产品（Product）</strong>：表示被构建的复杂对象。在建造过程完成后，通常会返回一个包含所有属性的最终产品对象。</li>
<li><strong>抽象建造者（Builder）</strong>：定义了构建产品对象的抽象方法，包括设置各个属性的方法。</li>
<li><strong>具体建造者（Concrete Builder）</strong>：实现了抽象建造者接口，负责构建和装配产品的各个部件，并定义了具体的构建步骤。</li>
<li><strong>指挥者（Director）</strong>：负责调用具体建造者来构建产品对象。它不直接创建产品对象，而是通过调用具体建造者的方法来构建产品。</li>
</ol>
<p>建造者模式通常适用于以下情况：</p>
<ul>
<li>创建对象的构建过程比较复杂，需要很多步骤或者涉及到很多部件。</li>
<li>希望将对象的构建过程和表示分离开来，以便能够灵活地组合不同的部件和构建步骤。</li>
</ul>
<p>以下是一个简单的建造者模式的示例（以创建一个电脑对象为例）：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 产品类 - 电脑</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Computer</span> &#123;<br>    <span class="hljs-keyword">private</span> String cpu;<br>    <span class="hljs-keyword">private</span> String memory;<br>    <span class="hljs-keyword">private</span> String hardDisk;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setCpu</span><span class="hljs-params">(String cpu)</span> &#123;<br>        <span class="hljs-built_in">this</span>.cpu = cpu;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setMemory</span><span class="hljs-params">(String memory)</span> &#123;<br>        <span class="hljs-built_in">this</span>.memory = memory;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setHardDisk</span><span class="hljs-params">(String hardDisk)</span> &#123;<br>        <span class="hljs-built_in">this</span>.hardDisk = hardDisk;<br>    &#125;<br><br>    <span class="hljs-comment">// 其他方法...</span><br>&#125;<br><br><span class="hljs-comment">// 抽象建造者</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">ComputerBuilder</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">buildCpu</span><span class="hljs-params">()</span>;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">buildMemory</span><span class="hljs-params">()</span>;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">buildHardDisk</span><span class="hljs-params">()</span>;<br>    Computer <span class="hljs-title function_">getResult</span><span class="hljs-params">()</span>;<br>&#125;<br><br><span class="hljs-comment">// 具体建造者 - 高配版电脑建造者</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">HighConfigComputerBuilder</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">ComputerBuilder</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">Computer</span> <span class="hljs-variable">computer</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Computer</span>();<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">buildCpu</span><span class="hljs-params">()</span> &#123;<br>        computer.setCpu(<span class="hljs-string">&quot;Intel i9&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">buildMemory</span><span class="hljs-params">()</span> &#123;<br>        computer.setMemory(<span class="hljs-string">&quot;32GB&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">buildHardDisk</span><span class="hljs-params">()</span> &#123;<br>        computer.setHardDisk(<span class="hljs-string">&quot;1TB SSD&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Computer <span class="hljs-title function_">getResult</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> computer;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 指挥者</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Director</span> &#123;<br>    <span class="hljs-keyword">private</span> ComputerBuilder builder;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setBuilder</span><span class="hljs-params">(ComputerBuilder builder)</span> &#123;<br>        <span class="hljs-built_in">this</span>.builder = builder;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> Computer <span class="hljs-title function_">construct</span><span class="hljs-params">()</span> &#123;<br>        builder.buildCpu();<br>        builder.buildMemory();<br>        builder.buildHardDisk();<br>        <span class="hljs-keyword">return</span> builder.getResult();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="4、单例模式"><a href="#4、单例模式" class="headerlink" title="4、单例模式"></a>4、单例模式</h4><p>确保某个类只有一个实例，并提供一个全局访问点来访问该实例。</p>
<p>实现单例模式的一般步骤包括：</p>
<ol>
<li><strong>私有构造函数</strong>：确保外部不能通过构造函数来创建该类的实例。</li>
<li><strong>静态成员变量</strong>：在类中定义一个静态成员变量来保存该类的唯一实例。</li>
<li><strong>静态方法</strong>：提供一个静态方法来访问该唯一实例，并确保在需要时进行实例化</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Singleton</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Singleton instance;<br><br>    <span class="hljs-comment">// 私有构造函数</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-title function_">Singleton</span><span class="hljs-params">()</span> &#123;&#125;<br><br>    <span class="hljs-comment">// 静态方法获取唯一实例</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">synchronized</span> Singleton <span class="hljs-title function_">getInstance</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span> (instance == <span class="hljs-literal">null</span>) &#123;<br>            instance = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Singleton</span>();<br>        &#125;<br>        <span class="hljs-keyword">return</span> instance;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="5、原型模式"><a href="#5、原型模式" class="headerlink" title="5、原型模式"></a>5、原型模式</h4><p>通过复制现有对象来创建新对象，而不是通过实例化类来创建对象。</p>
<p>原型模式包含以下几个角色：</p>
<ol>
<li><strong>原型接口（Prototype）</strong>：声明了一个克隆自身的方法，用于复制自身来创建新对象。</li>
<li><strong>具体原型类（Concrete Prototype）</strong>：实现了原型接口，负责实现克隆自身的方法。</li>
<li><strong>客户端（Client）</strong>：负责使用原型对象来创建新对象的客户端代码。</li>
</ol>
<p>原型模式通常适用于以下情况：</p>
<ul>
<li>当创建对象的成本比较高昂，或者对象的创建过程比较复杂，但新对象与现有对象相似度很高时。</li>
<li>当需要避免通过子类进行复杂的初始化配置时，而是希望通过复制一个已有的实例来创建新实例时。</li>
</ul>
<p>以下是一个简单的原型模式的示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 原型接口</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Prototype</span> &#123;<br>    Prototype <span class="hljs-title function_">clone</span><span class="hljs-params">()</span>;<br>&#125;<br><br><span class="hljs-comment">// 具体原型类</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcretePrototype</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Prototype</span> &#123;<br>    <span class="hljs-keyword">private</span> String field;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ConcretePrototype</span><span class="hljs-params">(String field)</span> &#123;<br>        <span class="hljs-built_in">this</span>.field = field;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getField</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> field;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Prototype <span class="hljs-title function_">clone</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-comment">// 创建一个新对象，并将当前对象的属性复制给新对象</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcretePrototype</span>(<span class="hljs-built_in">this</span>.field);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 客户端</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">ConcretePrototype</span> <span class="hljs-variable">prototype</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcretePrototype</span>(<span class="hljs-string">&quot;data&quot;</span>);<br>        <span class="hljs-type">ConcretePrototype</span> <span class="hljs-variable">clone</span> <span class="hljs-operator">=</span> (ConcretePrototype) prototype.clone();<br><br>        System.out.println(<span class="hljs-string">&quot;Original Object: &quot;</span> + prototype.getField());<br>        System.out.println(<span class="hljs-string">&quot;Cloned Object: &quot;</span> + clone.getField());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="结构型模式"><a href="#结构型模式" class="headerlink" title="结构型模式"></a>结构型模式</h3><ol>
<li>适配器模式：将一个类的接口转换成客户端所期待的另一个接口，使得原本由于接口不兼容而不能一起工作的类能够协同工作。</li>
<li>装饰器模式：允许向一个对象动态地添加新的功能，而无需修改其源代码。</li>
<li>代理模式：通过代理对象控制对原始对象的访问。</li>
<li>外观模式：提供一个统一的接口，用于访问子系统中的一组接口。</li>
<li>桥接模式：将抽象部分与实现部分分离，使它们可以独立变化，从而可以动态地组合不同的抽象和实现。</li>
<li>组合模式：允许将对象组合成树形结构以表示“部分-整体”的层次结构。</li>
<li>享元模式：通过共享对象来减少内存使用和提高性能。在享元模式中，对象被分为内部状态（Intrinsic State）和外部状态（Extrinsic State），其中内部状态可以被多个对象共享，而外部状态需要在对象之间单独维护。</li>
</ol>
<h4 id="1、适配器模式"><a href="#1、适配器模式" class="headerlink" title="1、适配器模式"></a>1、适配器模式</h4><p>将一个类的接口转换成客户端所期待的另一个接口，使得原本由于接口不兼容而不能一起工作的类能够协同工作。</p>
<p>适配器模式包含以下几个角色：</p>
<ol>
<li><strong>目标接口（Target）</strong>：定义客户端使用的接口，客户端期待的接口。</li>
<li><strong>适配器（Adapter）</strong>：实现了目标接口，并包装了一个需要适配的类的对象，在目标接口中调用被包装对象的方法。</li>
<li><strong>被适配者（Adaptee）</strong>：需要被适配的类，其接口与目标接口不兼容。</li>
<li><strong>客户端（Client）</strong>：通过目标接口与适配器交互，调用适配器的方法来实现需要的功能。</li>
</ol>
<p>适配器模式通常适用于以下情况：</p>
<ul>
<li>当需要使用一个已经存在的类，而它的接口不符合需求时。</li>
<li>当需要创建一个可复用的类，与一些不相关或不可预见的类协作时。</li>
</ul>
<p>以下是一个简单的适配器模式的示例（以一个日志记录器适配器为例）：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 目标接口</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Logger</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">log</span><span class="hljs-params">(String message)</span>;<br>&#125;<br><br><span class="hljs-comment">// 具体目标 - 文件日志记录器</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">FileLogger</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Logger</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">log</span><span class="hljs-params">(String message)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Log message to file: &quot;</span> + message);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 适配器类</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">LoggerAdapter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Logger</span> &#123;<br>    <span class="hljs-keyword">private</span> DatabaseLogger databaseLogger;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">LoggerAdapter</span><span class="hljs-params">(DatabaseLogger databaseLogger)</span> &#123;<br>        <span class="hljs-built_in">this</span>.databaseLogger = databaseLogger;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">log</span><span class="hljs-params">(String message)</span> &#123;<br>        databaseLogger.writeLog(message);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 被适配者 - 数据库日志记录器</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">DatabaseLogger</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">writeLog</span><span class="hljs-params">(String message)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Log message to database: &quot;</span> + message);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 客户端</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Logger</span> <span class="hljs-variable">fileLogger</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileLogger</span>();<br>        fileLogger.log(<span class="hljs-string">&quot;This is a log message to file.&quot;</span>);<br><br>        <span class="hljs-comment">// 使用适配器将数据库日志记录器适配成目标接口</span><br>        <span class="hljs-type">DatabaseLogger</span> <span class="hljs-variable">databaseLogger</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DatabaseLogger</span>();<br>        <span class="hljs-type">Logger</span> <span class="hljs-variable">dbLoggerAdapter</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">LoggerAdapter</span>(databaseLogger);<br>        dbLoggerAdapter.log(<span class="hljs-string">&quot;This is a log message to database.&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="2、装饰器模式"><a href="#2、装饰器模式" class="headerlink" title="2、装饰器模式"></a>2、装饰器模式</h4><p>允许向一个对象动态地添加新的功能，而无需修改其源代码。</p>
<p>装饰器模式包含以下几个角色：</p>
<ol>
<li><strong>抽象构件（Component）</strong>：定义了一个对象接口，可以给这些对象动态地添加新的职责。</li>
<li><strong>具体构件（Concrete Component）</strong>：实现了抽象构件接口，是被装饰的对象，可以给这个对象添加新的职责。</li>
<li><strong>装饰器（Decorator）</strong>：持有一个抽象构件的引用，并实现了抽象构件的接口，可以动态地给具体构件对象添加新的职责。</li>
<li><strong>具体装饰器（Concrete Decorator）</strong>：具体的装饰器类，实现了装饰器接口，并且通过构造函数接收一个抽象构件对象，在原有对象的基础上添加新的功能。</li>
</ol>
<p>装饰器模式通常适用于以下情况：</p>
<ul>
<li>需要向一个对象添加额外的功能，而不想影响到其他对象。</li>
<li>需要动态地给对象添加功能，而且添加的功能可以动态撤销。</li>
</ul>
<p>以下是一个简单的装饰器模式的示例（以咖啡和配料为例）：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 抽象构件 - 咖啡</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Coffee</span> &#123;<br>    String <span class="hljs-title function_">getDescription</span><span class="hljs-params">()</span>;<br>    <span class="hljs-type">double</span> <span class="hljs-title function_">cost</span><span class="hljs-params">()</span>;<br>&#125;<br><br><span class="hljs-comment">// 具体构件 - 普通咖啡</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SimpleCoffee</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Coffee</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getDescription</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Simple Coffee&quot;</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">cost</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-number">1.0</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 装饰器 - 抽象装饰器</span><br><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CoffeeDecorator</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Coffee</span> &#123;<br>    <span class="hljs-keyword">protected</span> Coffee decoratedCoffee;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">CoffeeDecorator</span><span class="hljs-params">(Coffee decoratedCoffee)</span> &#123;<br>        <span class="hljs-built_in">this</span>.decoratedCoffee = decoratedCoffee;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getDescription</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> decoratedCoffee.getDescription();<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">cost</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> decoratedCoffee.cost();<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 具体装饰器 - 奶油</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">CreamDecorator</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">CoffeeDecorator</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">CreamDecorator</span><span class="hljs-params">(Coffee decoratedCoffee)</span> &#123;<br>        <span class="hljs-built_in">super</span>(decoratedCoffee);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getDescription</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>.getDescription() + <span class="hljs-string">&quot;, Cream&quot;</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">cost</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>.cost() + <span class="hljs-number">0.5</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 具体装饰器 - 糖</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SugarDecorator</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">CoffeeDecorator</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">SugarDecorator</span><span class="hljs-params">(Coffee decoratedCoffee)</span> &#123;<br>        <span class="hljs-built_in">super</span>(decoratedCoffee);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getDescription</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>.getDescription() + <span class="hljs-string">&quot;, Sugar&quot;</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">double</span> <span class="hljs-title function_">cost</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-built_in">super</span>.cost() + <span class="hljs-number">0.2</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 客户端</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Coffee</span> <span class="hljs-variable">simpleCoffee</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleCoffee</span>();<br>        System.out.println(<span class="hljs-string">&quot;Description: &quot;</span> + simpleCoffee.getDescription() + <span class="hljs-string">&quot;, Cost: $&quot;</span> + simpleCoffee.cost());<br><br>        <span class="hljs-comment">// 添加奶油装饰器</span><br>        <span class="hljs-type">Coffee</span> <span class="hljs-variable">creamCoffee</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CreamDecorator</span>(simpleCoffee);<br>        System.out.println(<span class="hljs-string">&quot;Description: &quot;</span> + creamCoffee.getDescription() + <span class="hljs-string">&quot;, Cost: $&quot;</span> + creamCoffee.cost());<br><br>        <span class="hljs-comment">// 添加糖装饰器</span><br>        <span class="hljs-type">Coffee</span> <span class="hljs-variable">sugarCoffee</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SugarDecorator</span>(simpleCoffee);<br>        System.out.println(<span class="hljs-string">&quot;Description: &quot;</span> + sugarCoffee.getDescription() + <span class="hljs-string">&quot;, Cost: $&quot;</span> + sugarCoffee.cost());<br><br>        <span class="hljs-comment">// 添加奶油和糖装饰器</span><br>        <span class="hljs-type">Coffee</span> <span class="hljs-variable">creamAndSugarCoffee</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">CreamDecorator</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">SugarDecorator</span>(simpleCoffee));<br>        System.out.println(<span class="hljs-string">&quot;Description: &quot;</span> + creamAndSugarCoffee.getDescription() + <span class="hljs-string">&quot;, Cost: $&quot;</span> + creamAndSugarCoffee.cost());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="3、代理模式"><a href="#3、代理模式" class="headerlink" title="3、代理模式"></a>3、代理模式</h4><p>通过代理对象控制对原始对象的访问。</p>
<p>代理模式包含以下几个角色：</p>
<ol>
<li><strong>抽象主题（Subject）</strong>：定义了真实主题和代理主题的共同接口，这样就在任何使用真实主题的地方都可以使用代理主题。</li>
<li><strong>真实主题（Real Subject）</strong>：定义了代理所代表的真实对象，是最终要引用的对象。</li>
<li><strong>代理（Proxy）</strong>：保存了对真实主题的引用，并提供与真实主题相同的接口，客户端通过代理类来访问真实主题。</li>
<li><strong>客户端（Client）</strong>：通过代理来访问真实主题。</li>
</ol>
<p>代理模式通常适用于以下情况：</p>
<ul>
<li>需要在访问一个对象时添加额外的功能，但又不想修改该对象的代码。</li>
<li>需要对访问某个对象的方式进行控制，例如权限控制、延迟加载等。</li>
</ul>
<p>以下是一个简单的代理模式的示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 抽象主题</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Image</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">display</span><span class="hljs-params">()</span>;<br>&#125;<br><br><span class="hljs-comment">// 真实主题</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">RealImage</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Image</span> &#123;<br>    <span class="hljs-keyword">private</span> String filename;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">RealImage</span><span class="hljs-params">(String filename)</span> &#123;<br>        <span class="hljs-built_in">this</span>.filename = filename;<br>        loadFromDisk();<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">loadFromDisk</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Loading image from disk: &quot;</span> + filename);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">display</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Displaying image: &quot;</span> + filename);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 代理</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ProxyImage</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Image</span> &#123;<br>    <span class="hljs-keyword">private</span> RealImage realImage;<br>    <span class="hljs-keyword">private</span> String filename;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ProxyImage</span><span class="hljs-params">(String filename)</span> &#123;<br>        <span class="hljs-built_in">this</span>.filename = filename;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">display</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span> (realImage == <span class="hljs-literal">null</span>) &#123;<br>            realImage = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RealImage</span>(filename);<br>        &#125;<br>        realImage.display();<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 客户端</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Image</span> <span class="hljs-variable">image</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ProxyImage</span>(<span class="hljs-string">&quot;test.jpg&quot;</span>);<br><br>        <span class="hljs-comment">// 图片加载过程是延迟的，只有在真正调用 display() 方法时才会加载</span><br>        image.display();<br><br>        <span class="hljs-comment">// 再次调用 display() 方法，不需要重新加载图片</span><br>        image.display();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="4、外观模式"><a href="#4、外观模式" class="headerlink" title="4、外观模式"></a>4、外观模式</h4><p>提供一个统一的接口，用于访问子系统中的一组接口。</p>
<p>外观模式包含以下几个角色：</p>
<ol>
<li><strong>外观（Facade）</strong>：提供了一个简单的接口，隐藏了子系统的复杂性，使得客户端可以更容易地与子系统进行交互。</li>
<li><strong>子系统（Subsystem）</strong>：包含一组相关的类，实现了子系统的功能，但这些类对客户端来说是透明的，即客户端不需要直接与它们进行交互。</li>
</ol>
<p>外观模式通常适用于以下情况：</p>
<ul>
<li>当一个复杂系统的子系统之间存在复杂的依赖关系，需要一个统一的接口来简化客户端与子系统之间的交互。</li>
<li>当客户端需要使用一个复杂的子系统，但只需要与该子系统的一部分进行交互时。</li>
</ul>
<p>以下是一个简单的外观模式的示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 子系统A</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SubsystemA</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">operationA</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;SubsystemA operation&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 子系统B</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SubsystemB</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">operationB</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;SubsystemB operation&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 子系统C</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">SubsystemC</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">operationC</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;SubsystemC operation&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 外观</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Facade</span> &#123;<br>    <span class="hljs-keyword">private</span> SubsystemA subsystemA;<br>    <span class="hljs-keyword">private</span> SubsystemB subsystemB;<br>    <span class="hljs-keyword">private</span> SubsystemC subsystemC;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Facade</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-built_in">this</span>.subsystemA = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SubsystemA</span>();<br>        <span class="hljs-built_in">this</span>.subsystemB = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SubsystemB</span>();<br>        <span class="hljs-built_in">this</span>.subsystemC = <span class="hljs-keyword">new</span> <span class="hljs-title class_">SubsystemC</span>();<br>    &#125;<br><br>    <span class="hljs-comment">// 提供一个简单的接口，隐藏了子系统的复杂性</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">operation</span><span class="hljs-params">()</span> &#123;<br>        subsystemA.operationA();<br>        subsystemB.operationB();<br>        subsystemC.operationC();<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 客户端</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">// 客户端通过外观来访问子系统，而不需要直接与子系统进行交互</span><br>        <span class="hljs-type">Facade</span> <span class="hljs-variable">facade</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Facade</span>();<br>        facade.operation();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="5、桥接模式"><a href="#5、桥接模式" class="headerlink" title="5、桥接模式"></a>5、桥接模式</h4><p>将抽象部分与实现部分分离，使它们可以独立变化，从而可以动态地组合不同的抽象和实现。</p>
<p>桥接模式包含以下几个角色：</p>
<ol>
<li><strong>抽象部分（Abstraction）</strong>：定义了抽象部分的接口，并维护一个指向实现部分的引用。</li>
<li><strong>扩充抽象类（Refined Abstraction）</strong>：拓展了抽象部分的接口，通常为抽象类，在抽象部分的基础上添加了更多的方法或行为。</li>
<li><strong>实现部分（Implementor）</strong>：定义了实现部分的接口，该接口不一定与抽象部分完全相同，但它们之间必须是相互独立的。</li>
<li><strong>具体实现类（Concrete Implementor）</strong>：实现了实现部分的接口，提供具体的实现。</li>
</ol>
<p>桥接模式通常适用于以下情况：</p>
<ul>
<li>当需要避免在抽象部分和实现部分之间形成静态的绑定关系时。</li>
<li>当一个类存在两个（或多个）变化的维度，且需要在这些维度上独立扩展时。</li>
</ul>
<p>以下是一个简单的桥接模式的示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 实现部分接口</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Implementor</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">operationImpl</span><span class="hljs-params">()</span>;<br>&#125;<br><br><span class="hljs-comment">// 具体实现类A</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteImplementorA</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Implementor</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">operationImpl</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Concrete Implementor A operation&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 具体实现类B</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteImplementorB</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Implementor</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">operationImpl</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Concrete Implementor B operation&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 抽象部分</span><br><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Abstraction</span> &#123;<br>    <span class="hljs-keyword">protected</span> Implementor implementor;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Abstraction</span><span class="hljs-params">(Implementor implementor)</span> &#123;<br>        <span class="hljs-built_in">this</span>.implementor = implementor;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">operation</span><span class="hljs-params">()</span>;<br>&#125;<br><br><span class="hljs-comment">// 扩充抽象类</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">RefinedAbstraction</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Abstraction</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">RefinedAbstraction</span><span class="hljs-params">(Implementor implementor)</span> &#123;<br>        <span class="hljs-built_in">super</span>(implementor);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">operation</span><span class="hljs-params">()</span> &#123;<br>        implementor.operationImpl();<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 客户端</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Implementor</span> <span class="hljs-variable">implementorA</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcreteImplementorA</span>();<br>        <span class="hljs-type">Implementor</span> <span class="hljs-variable">implementorB</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcreteImplementorB</span>();<br><br>        <span class="hljs-type">Abstraction</span> <span class="hljs-variable">abstractionA</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RefinedAbstraction</span>(implementorA);<br>        abstractionA.operation();<br><br>        <span class="hljs-type">Abstraction</span> <span class="hljs-variable">abstractionB</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">RefinedAbstraction</span>(implementorB);<br>        abstractionB.operation();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="6、组合模式"><a href="#6、组合模式" class="headerlink" title="6、组合模式"></a>6、组合模式</h4><p>允许将对象组合成树形结构以表示“部分-整体”的层次结构。</p>
<p>组合模式包含以下几个角色：</p>
<ol>
<li><strong>组件（Component）</strong>：声明了组合对象和叶子对象的公共接口，可以包含所有子类共有的行为和属性。</li>
<li><strong>叶子（Leaf）</strong>：表示树中的叶子节点对象，叶子节点没有子节点。</li>
<li><strong>组合（Composite）</strong>：表示树中的组合对象，组合对象可以包含叶子对象和其他组合对象作为其子节点。</li>
<li><strong>客户端（Client）</strong>：通过组合对象和叶子对象的共同接口来进行操作。</li>
</ol>
<p>组合模式通常适用于以下情况：</p>
<ul>
<li>当想要表示对象的“部分-整体”层次结构，并且希望用户统一地对待所有对象时。</li>
<li>当希望用户忽略组合对象与叶子对象之间的差异，并一致地使用它们时。</li>
</ul>
<p>以下是一个简单的组合模式的示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-comment">// 抽象组件</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Component</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">operation</span><span class="hljs-params">()</span>;<br>&#125;<br><br><span class="hljs-comment">// 叶子组件</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Leaf</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Component</span> &#123;<br>    <span class="hljs-keyword">private</span> String name;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Leaf</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">operation</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Leaf &quot;</span> + name + <span class="hljs-string">&quot; operation&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 组合组件</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Composite</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Component</span> &#123;<br>    <span class="hljs-keyword">private</span> List&lt;Component&gt; children = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(Component component)</span> &#123;<br>        children.add(component);<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">remove</span><span class="hljs-params">(Component component)</span> &#123;<br>        children.remove(component);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">operation</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Composite operation&quot;</span>);<br>        <span class="hljs-keyword">for</span> (Component component : children) &#123;<br>            component.operation();<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 客户端</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">// 创建组合对象</span><br>        <span class="hljs-type">Composite</span> <span class="hljs-variable">composite</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Composite</span>();<br><br>        <span class="hljs-comment">// 添加叶子对象</span><br>        composite.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Leaf</span>(<span class="hljs-string">&quot;Leaf A&quot;</span>));<br>        composite.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Leaf</span>(<span class="hljs-string">&quot;Leaf B&quot;</span>));<br><br>        <span class="hljs-comment">// 创建子组合对象</span><br>        <span class="hljs-type">Composite</span> <span class="hljs-variable">subComposite</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Composite</span>();<br>        subComposite.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Leaf</span>(<span class="hljs-string">&quot;Leaf C&quot;</span>));<br>        subComposite.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Leaf</span>(<span class="hljs-string">&quot;Leaf D&quot;</span>));<br><br>        <span class="hljs-comment">// 将子组合对象添加到父组合对象</span><br>        composite.add(subComposite);<br><br>        <span class="hljs-comment">// 执行组合对象的操作</span><br>        composite.operation();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="7、享元模式"><a href="#7、享元模式" class="headerlink" title="7、享元模式"></a>7、享元模式</h4><p>通过共享对象来减少内存使用和提高性能。在享元模式中，对象被分为内部状态（Intrinsic State）和外部状态（Extrinsic State），其中内部状态可以被多个对象共享，而外部状态需要在对象之间单独维护。</p>
<p>享元模式（Flyweight Pattern）是一种结构型设计模式，其目的是通过共享对象来减少内存使用和提高性能。在享元模式中，对象被分为内部状态（Intrinsic State）和外部状态（Extrinsic State），其中内部状态可以被多个对象共享，而外部状态需要在对象之间单独维护。</p>
<p>享元模式包含以下几个角色：</p>
<ol>
<li><strong>享元工厂（Flyweight Factory）</strong>：负责创建和管理享元对象，确保对象被正确地共享和重复使用。</li>
<li><strong>抽象享元（Flyweight）</strong>：声明了共享对象的接口，通过这个接口可以接收和操作外部状态。</li>
<li><strong>具体享元（Concrete Flyweight）</strong>：实现了抽象享元接口，并实现了内部状态的共享。</li>
<li><strong>客户端（Client）</strong>：通过享元工厂获取享元对象，并设置或获取外部状态，然后使用享元对象。</li>
</ol>
<p>享元模式通常适用于以下情况：</p>
<ul>
<li>当系统中存在大量相似对象，这些对象具有一些共同的属性，可以抽取出来作为内部状态进行共享。</li>
<li>当需要缓存对象以提高性能时，可以使用享元模式来重复使用相似对象。</li>
</ul>
<p>以下是一个简单的享元模式的示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.HashMap;<br><span class="hljs-keyword">import</span> java.util.Map;<br><br><span class="hljs-comment">// 抽象享元</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Shape</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">draw</span><span class="hljs-params">(String color)</span>;<br>&#125;<br><br><span class="hljs-comment">// 具体享元</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Circle</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Shape</span> &#123;<br>    <span class="hljs-keyword">private</span> String color;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Circle</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-built_in">this</span>.color = <span class="hljs-literal">null</span>;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">draw</span><span class="hljs-params">(String color)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Drawing circle with color: &quot;</span> + color);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 享元工厂</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ShapeFactory</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> Map&lt;String, Shape&gt; circleMap = <span class="hljs-keyword">new</span> <span class="hljs-title class_">HashMap</span>&lt;&gt;();<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Shape <span class="hljs-title function_">getCircle</span><span class="hljs-params">(String color)</span> &#123;<br>        <span class="hljs-type">Circle</span> <span class="hljs-variable">circle</span> <span class="hljs-operator">=</span> (Circle) circleMap.get(color);<br><br>        <span class="hljs-keyword">if</span> (circle == <span class="hljs-literal">null</span>) &#123;<br>            circle = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Circle</span>();<br>            circleMap.put(color, circle);<br>        &#125;<br><br>        <span class="hljs-keyword">return</span> circle;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 客户端</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> String[] colors = &#123;<span class="hljs-string">&quot;Red&quot;</span>, <span class="hljs-string">&quot;Green&quot;</span>, <span class="hljs-string">&quot;Blue&quot;</span>&#125;;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">10</span>; ++i) &#123;<br>            <span class="hljs-type">Circle</span> <span class="hljs-variable">circle</span> <span class="hljs-operator">=</span> (Circle) ShapeFactory.getCircle(getRandomColor());<br>            circle.draw(getRandomColor());<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String <span class="hljs-title function_">getRandomColor</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> colors[(<span class="hljs-type">int</span>) (Math.random() * colors.length)];<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="行为型模式"><a href="#行为型模式" class="headerlink" title="行为型模式"></a>行为型模式</h3><ol>
<li>策略模式：策略模式定义一系列算法，并将每个算法封装起来，使它们可以相互替换。</li>
<li>模板方法模式：模板方法模式定义一个操作中的算法的框架，将某些步骤延迟到子类中实现。</li>
<li>观察者模式：观察者模式定义一种一对多的依赖关系，当一个对象的状态发生变化时，所有依赖于它的对象都会得到通知并自动更新。</li>
<li>迭代子模式：提供一种方法顺序访问一个聚合对象中的各个元素，而又不暴露该对象的内部表示。</li>
<li>责任链模式：责任链模式允许你将请求沿着处理者链进行传递，直到有一个处理者能够处理它。责任链模式将请求发送者和接收者解耦，使得多个对象都有机会处理请求，同时避免了请求发送者需要知道处理请求的具体处理者的情况。</li>
<li>命令模式：将请求封装成一个对象，从而允许使用不同的请求、队列或者日志来参数化其他对象，并支持可撤销的操作。</li>
<li>备忘录模式：允许在不暴露对象实现细节的情况下保存和恢复对象的内部状态。备忘录模式通常用于需要记录对象状态历史、撤销操作或者提供快照功能的场景。</li>
<li>状态模式：允许对象在内部状态改变时改变它的行为，看起来好像改变了它的类。状态模式将每个状态封装成一个类，并将对象的行为委托给当前状态对象。</li>
<li>访问者模式：访问者模式能够将算法与对象结构分离开来，使得可以在不改变对象结构的情况下定义新的操作。访问者模式的核心思想是在不改变元素的类的前提下，通过定义访问者类来对元素进行操作。</li>
<li>中介者模式：中介者模式通过封装一系列对象之间的交互方式，来减少对象之间的直接依赖关系，从而降低系统的耦合性。中介者模式将系统中各个对象之间的交互行为集中到中介者对象中进行处理，而不是让对象之间相互引用。</li>
<li>解释器模式：解释器模式定义一种语言的文法，并且构建一个解释器来解释这个语言中的句子。解释器模式通常用于处理复杂的语法或规则，它将一个表达式解析成一个抽象语法树，并提供一种灵活的方式来进行解释、执行或操作。</li>
</ol>
<h4 id="1、策略模式"><a href="#1、策略模式" class="headerlink" title="1、策略模式"></a>1、策略模式</h4><p>策略模式定义一系列算法，并将每个算法封装起来，使它们可以相互替换。</p>
<p>策略模式包含以下几个角色：</p>
<ol>
<li><strong>策略接口（Strategy）</strong>：定义了所有支持的算法的通用接口。</li>
<li><strong>具体策略（Concrete Strategy）</strong>：实现了策略接口，提供了具体的算法实现。</li>
<li><strong>上下文（Context）</strong>：维护一个对策略对象的引用，同时提供了一个接口，供客户端调用。</li>
</ol>
<p>策略模式通常适用于以下情况：</p>
<ul>
<li>当需要在运行时选择算法时，可以使用策略模式来动态地切换算法。</li>
<li>当一个类有多种行为，而这些行为在不同的场景下可能发生变化时。</li>
</ul>
<p>以下是一个简单的策略模式的示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 策略接口</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">PaymentStrategy</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">pay</span><span class="hljs-params">(<span class="hljs-type">int</span> amount)</span>;<br>&#125;<br><br><span class="hljs-comment">// 具体策略 - 支付宝支付</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AliPayStrategy</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">PaymentStrategy</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">pay</span><span class="hljs-params">(<span class="hljs-type">int</span> amount)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Paid &quot;</span> + amount + <span class="hljs-string">&quot; via AliPay&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 具体策略 - 微信支付</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">WeChatPayStrategy</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">PaymentStrategy</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">pay</span><span class="hljs-params">(<span class="hljs-type">int</span> amount)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Paid &quot;</span> + amount + <span class="hljs-string">&quot; via WeChatPay&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 上下文</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">PaymentContext</span> &#123;<br>    <span class="hljs-keyword">private</span> PaymentStrategy paymentStrategy;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setPaymentStrategy</span><span class="hljs-params">(PaymentStrategy paymentStrategy)</span> &#123;<br>        <span class="hljs-built_in">this</span>.paymentStrategy = paymentStrategy;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">pay</span><span class="hljs-params">(<span class="hljs-type">int</span> amount)</span> &#123;<br>        <span class="hljs-keyword">if</span> (paymentStrategy != <span class="hljs-literal">null</span>) &#123;<br>            paymentStrategy.pay(amount);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            System.out.println(<span class="hljs-string">&quot;No payment method selected&quot;</span>);<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 客户端</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">PaymentContext</span> <span class="hljs-variable">paymentContext</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PaymentContext</span>();<br><br>        <span class="hljs-comment">// 使用支付宝支付</span><br>        paymentContext.setPaymentStrategy(<span class="hljs-keyword">new</span> <span class="hljs-title class_">AliPayStrategy</span>());<br>        paymentContext.pay(<span class="hljs-number">100</span>);<br><br>        <span class="hljs-comment">// 使用微信支付</span><br>        paymentContext.setPaymentStrategy(<span class="hljs-keyword">new</span> <span class="hljs-title class_">WeChatPayStrategy</span>());<br>        paymentContext.pay(<span class="hljs-number">200</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="2、模板方法模式"><a href="#2、模板方法模式" class="headerlink" title="2、模板方法模式"></a>2、模板方法模式</h4><p>模板方法模式定义一个操作中的算法的框架，将某些步骤延迟到子类中实现。</p>
<p>模板方法模式包含以下几个角色：</p>
<ol>
<li><strong>抽象模板类（Abstract Template）</strong>：定义了一个模板方法，其中包含了算法的骨架，具体步骤可以由子类实现。</li>
<li><strong>具体模板类（Concrete Template）</strong>：实现了抽象模板类中的具体步骤，完成算法的各个步骤。</li>
<li><strong>钩子方法（Hook Method）</strong>：在抽象模板类中定义的可选步骤，子类可以选择性地实现。</li>
<li><strong>具体子类（Concrete Subclass）</strong>：实现了抽象模板类中的抽象方法，以完成具体的算法。</li>
</ol>
<p>模板方法模式通常适用于以下情况：</p>
<ul>
<li>当有一些通用的步骤，但各个子类又有不同的实现时，可以将这些通用步骤放在抽象模板类中实现。</li>
<li>当不想让子类改变算法的整体结构，但又允许子类改变算法中的某些特定步骤时。</li>
</ul>
<p>以下是一个简单的模板方法模式的示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 抽象模板类</span><br><span class="hljs-keyword">abstract</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Game</span> &#123;<br>    <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">initialize</span><span class="hljs-params">()</span>;<br>    <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">startPlay</span><span class="hljs-params">()</span>;<br>    <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">endPlay</span><span class="hljs-params">()</span>;<br><br>    <span class="hljs-comment">// 模板方法，定义了算法的骨架</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">play</span><span class="hljs-params">()</span> &#123;<br>        initialize();<br>        startPlay();<br>        endPlay();<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 具体模板类 - 篮球游戏</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">BasketballGame</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Game</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">initialize</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Basketball game initialized&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">startPlay</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Basketball game started&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">endPlay</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Basketball game ended&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 具体模板类 - 足球游戏</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">FootballGame</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_">Game</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">initialize</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Football game initialized&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">startPlay</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Football game started&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">endPlay</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Football game ended&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 客户端</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Game</span> <span class="hljs-variable">basketballGame</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BasketballGame</span>();<br>        basketballGame.play();<br><br>        System.out.println();<br><br>        <span class="hljs-type">Game</span> <span class="hljs-variable">footballGame</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FootballGame</span>();<br>        footballGame.play();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="3、观察者模式"><a href="#3、观察者模式" class="headerlink" title="3、观察者模式"></a>3、观察者模式</h4><blockquote>
<p>观察者模式也被称为发布-订阅（Publish-Subscribe）模式。</p>
</blockquote>
<p>观察者模式定义一种一对多的依赖关系，当一个对象的状态发生变化时，所有依赖于它的对象都会得到通知并自动更新。</p>
<p>观察者模式包含以下几个角色：</p>
<ol>
<li><strong>主题（Subject）</strong>：也称为被观察者或可观察者，它维护一系列观察者对象，并提供添加、删除和通知观察者的方法。</li>
<li><strong>观察者（Observer）</strong>：定义了一个更新接口，使得在主题状态改变时能够接收到通知并进行相应的处理。</li>
<li><strong>具体主题（Concrete Subject）</strong>：实现了主题接口，负责维护具体的观察者列表，并在状态改变时发送通知给观察者。</li>
<li><strong>具体观察者（Concrete Observer）</strong>：实现了观察者接口，定义了在接收到主题通知时所采取的具体行动。</li>
</ol>
<p>观察者模式通常适用于以下情况：</p>
<ul>
<li>当一个对象的改变需要通知其他对象，并且不知道这些对象是谁时，可以使用观察者模式。</li>
<li>当一个对象的改变需要同时改变其他对象，而且它不知道具体有多少个对象需要改变时，也可以使用观察者模式。</li>
</ul>
<p>以下是一个简单的观察者模式的示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-comment">// 主题</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Subject</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">attach</span><span class="hljs-params">(Observer observer)</span>;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">detach</span><span class="hljs-params">(Observer observer)</span>;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">notifyObservers</span><span class="hljs-params">()</span>;<br>&#125;<br><br><span class="hljs-comment">// 具体主题</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteSubject</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Subject</span> &#123;<br>    <span class="hljs-keyword">private</span> List&lt;Observer&gt; observers = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> state;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setState</span><span class="hljs-params">(<span class="hljs-type">int</span> state)</span> &#123;<br>        <span class="hljs-built_in">this</span>.state = state;<br>        notifyObservers();<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">attach</span><span class="hljs-params">(Observer observer)</span> &#123;<br>        observers.add(observer);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">detach</span><span class="hljs-params">(Observer observer)</span> &#123;<br>        observers.remove(observer);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">notifyObservers</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">for</span> (Observer observer : observers) &#123;<br>            observer.update(state);<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 观察者</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Observer</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">update</span><span class="hljs-params">(<span class="hljs-type">int</span> state)</span>;<br>&#125;<br><br><span class="hljs-comment">// 具体观察者A</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteObserverA</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Observer</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">update</span><span class="hljs-params">(<span class="hljs-type">int</span> state)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;ConcreteObserverA: State changed to &quot;</span> + state);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 具体观察者B</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteObserverB</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Observer</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">update</span><span class="hljs-params">(<span class="hljs-type">int</span> state)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;ConcreteObserverB: State changed to &quot;</span> + state);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 客户端</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">ConcreteSubject</span> <span class="hljs-variable">subject</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcreteSubject</span>();<br>        <span class="hljs-type">Observer</span> <span class="hljs-variable">observerA</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcreteObserverA</span>();<br>        <span class="hljs-type">Observer</span> <span class="hljs-variable">observerB</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcreteObserverB</span>();<br><br>        subject.attach(observerA);<br>        subject.attach(observerB);<br><br>        subject.setState(<span class="hljs-number">10</span>);<br>        subject.setState(<span class="hljs-number">20</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="4、迭代子模式"><a href="#4、迭代子模式" class="headerlink" title="4、迭代子模式"></a>4、迭代子模式</h4><p>提供一种方法顺序访问一个聚合对象中的各个元素，而又不暴露该对象的内部表示。</p>
<p>迭代子模式包含以下几个角色：</p>
<ol>
<li><strong>迭代器接口（Iterator）</strong>：定义了访问和遍历聚合对象元素的接口。</li>
<li><strong>具体迭代器（Concrete Iterator）</strong>：实现了迭代器接口，负责对聚合对象进行遍历并记录当前位置。</li>
<li><strong>聚合接口（Aggregate）</strong>：定义了创建迭代器对象的接口。</li>
<li><strong>具体聚合（Concrete Aggregate）</strong>：实现了聚合接口，负责创建对应的具体迭代器对象。</li>
</ol>
<p>迭代子模式通常适用于以下情况：</p>
<ul>
<li>当需要对聚合对象进行遍历并且不想暴露其内部结构时，可以使用迭代子模式。</li>
<li>当需要提供一种统一的方法来访问不同类型的聚合对象时，也可以使用迭代子模式。</li>
</ul>
<p>以下是一个简单的迭代子模式的示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-comment">// 迭代器接口</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Iterator</span> &#123;<br>    <span class="hljs-type">boolean</span> <span class="hljs-title function_">hasNext</span><span class="hljs-params">()</span>;<br>    Object <span class="hljs-title function_">next</span><span class="hljs-params">()</span>;<br>&#125;<br><br><span class="hljs-comment">// 具体迭代器</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteIterator</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Iterator</span> &#123;<br>    <span class="hljs-keyword">private</span> List&lt;Object&gt; elements;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> <span class="hljs-variable">position</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ConcreteIterator</span><span class="hljs-params">(List&lt;Object&gt; elements)</span> &#123;<br>        <span class="hljs-built_in">this</span>.elements = elements;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">hasNext</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> position &lt; elements.size();<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Object <span class="hljs-title function_">next</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">if</span> (hasNext()) &#123;<br>            <span class="hljs-keyword">return</span> elements.get(position++);<br>        &#125;<br>        <span class="hljs-keyword">return</span> <span class="hljs-literal">null</span>;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 聚合接口</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Aggregate</span> &#123;<br>    Iterator <span class="hljs-title function_">createIterator</span><span class="hljs-params">()</span>;<br>&#125;<br><br><span class="hljs-comment">// 具体聚合</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteAggregate</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Aggregate</span> &#123;<br>    <span class="hljs-keyword">private</span> List&lt;Object&gt; elements = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">add</span><span class="hljs-params">(Object element)</span> &#123;<br>        elements.add(element);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> Iterator <span class="hljs-title function_">createIterator</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcreteIterator</span>(elements);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 客户端</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">ConcreteAggregate</span> <span class="hljs-variable">aggregate</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcreteAggregate</span>();<br>        aggregate.add(<span class="hljs-string">&quot;Element 1&quot;</span>);<br>        aggregate.add(<span class="hljs-string">&quot;Element 2&quot;</span>);<br>        aggregate.add(<span class="hljs-string">&quot;Element 3&quot;</span>);<br><br>        <span class="hljs-type">Iterator</span> <span class="hljs-variable">iterator</span> <span class="hljs-operator">=</span> aggregate.createIterator();<br>        <span class="hljs-keyword">while</span> (iterator.hasNext()) &#123;<br>            System.out.println(iterator.next());<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="5、责任链模式"><a href="#5、责任链模式" class="headerlink" title="5、责任链模式"></a>5、责任链模式</h4><p>责任链模式允许你将请求沿着处理者链进行传递，直到有一个处理者能够处理它。责任链模式将请求发送者和接收者解耦，使得多个对象都有机会处理请求，同时避免了请求发送者需要知道处理请求的具体处理者的情况。</p>
<p>责任链模式包含以下几个角色：</p>
<ol>
<li><strong>处理者接口（Handler）</strong>：定义了处理请求的接口，通常包含一个指向下一个处理者的引用。</li>
<li><strong>具体处理者（Concrete Handler）</strong>：实现了处理者接口，负责处理请求，如果自己无法处理，则将请求传递给下一个处理者。</li>
<li><strong>客户端（Client）</strong>：创建并且发送请求到处理者链中的第一个处理者。</li>
</ol>
<p>责任链模式通常适用于以下情况：</p>
<ul>
<li>当有多个对象可以处理同一个请求，并且客户端不知道哪个对象能够处理时，可以使用责任链模式。</li>
<li>当需要在不明确指定接收者的情况下，通过一组对象之一来处理请求时，也可以使用责任链模式。</li>
</ul>
<p>以下是一个简单的责任链模式的示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 处理者接口</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Handler</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleRequest</span><span class="hljs-params">(<span class="hljs-type">int</span> request)</span>;<br>&#125;<br><br><span class="hljs-comment">// 具体处理者A</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteHandlerA</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Handler</span> &#123;<br>    <span class="hljs-keyword">private</span> Handler nextHandler;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setNextHandler</span><span class="hljs-params">(Handler handler)</span> &#123;<br>        <span class="hljs-built_in">this</span>.nextHandler = handler;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleRequest</span><span class="hljs-params">(<span class="hljs-type">int</span> request)</span> &#123;<br>        <span class="hljs-keyword">if</span> (request &lt; <span class="hljs-number">10</span>) &#123;<br>            System.out.println(<span class="hljs-string">&quot;ConcreteHandlerA handles request: &quot;</span> + request);<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (nextHandler != <span class="hljs-literal">null</span>) &#123;<br>            nextHandler.handleRequest(request);<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 具体处理者B</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteHandlerB</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Handler</span> &#123;<br>    <span class="hljs-keyword">private</span> Handler nextHandler;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setNextHandler</span><span class="hljs-params">(Handler handler)</span> &#123;<br>        <span class="hljs-built_in">this</span>.nextHandler = handler;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleRequest</span><span class="hljs-params">(<span class="hljs-type">int</span> request)</span> &#123;<br>        <span class="hljs-keyword">if</span> (request &gt;= <span class="hljs-number">10</span> &amp;&amp; request &lt; <span class="hljs-number">20</span>) &#123;<br>            System.out.println(<span class="hljs-string">&quot;ConcreteHandlerB handles request: &quot;</span> + request);<br>        &#125; <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (nextHandler != <span class="hljs-literal">null</span>) &#123;<br>            nextHandler.handleRequest(request);<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 客户端</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">// 创建处理者对象</span><br>        <span class="hljs-type">Handler</span> <span class="hljs-variable">handlerA</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcreteHandlerA</span>();<br>        <span class="hljs-type">Handler</span> <span class="hljs-variable">handlerB</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcreteHandlerB</span>();<br><br>        <span class="hljs-comment">// 设置处理者之间的关系</span><br>        handlerA.setNextHandler(handlerB);<br><br>        <span class="hljs-comment">// 发送请求</span><br>        handlerA.handleRequest(<span class="hljs-number">5</span>);<br>        handlerA.handleRequest(<span class="hljs-number">15</span>);<br>        handlerA.handleRequest(<span class="hljs-number">25</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="6、命令模式"><a href="#6、命令模式" class="headerlink" title="6、命令模式"></a>6、命令模式</h4><p>将请求封装成一个对象，从而允许使用不同的请求、队列或者日志来参数化其他对象，并支持可撤销的操作。</p>
<p>命令模式包含以下几个角色：</p>
<ol>
<li><strong>命令接口（Command）</strong>：声明了执行请求的方法。</li>
<li><strong>具体命令（Concrete Command）</strong>：实现了命令接口，负责执行具体的请求。</li>
<li><strong>调用者（Invoker）</strong>：负责调用命令对象执行请求。</li>
<li><strong>接收者（Receiver）</strong>：知道如何执行一个请求，任何类都可能成为一个接收者。</li>
</ol>
<p>命令模式通常适用于以下情况：</p>
<ul>
<li>当需要将请求发送者与请求接收者解耦时，可以使用命令模式。</li>
<li>当需要支持撤销操作时，可以使用命令模式。</li>
</ul>
<p>以下是一个简单的命令模式的示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 命令接口</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Command</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">execute</span><span class="hljs-params">()</span>;<br>&#125;<br><br><span class="hljs-comment">// 具体命令</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteCommand</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Command</span> &#123;<br>    <span class="hljs-keyword">private</span> Receiver receiver;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ConcreteCommand</span><span class="hljs-params">(Receiver receiver)</span> &#123;<br>        <span class="hljs-built_in">this</span>.receiver = receiver;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">execute</span><span class="hljs-params">()</span> &#123;<br>        receiver.action();<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 接收者</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Receiver</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">action</span><span class="hljs-params">()</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Receiver executes action&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 调用者</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Invoker</span> &#123;<br>    <span class="hljs-keyword">private</span> Command command;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setCommand</span><span class="hljs-params">(Command command)</span> &#123;<br>        <span class="hljs-built_in">this</span>.command = command;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">executeCommand</span><span class="hljs-params">()</span> &#123;<br>        command.execute();<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 客户端</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Receiver</span> <span class="hljs-variable">receiver</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Receiver</span>();<br>        <span class="hljs-type">Command</span> <span class="hljs-variable">command</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcreteCommand</span>(receiver);<br>        <span class="hljs-type">Invoker</span> <span class="hljs-variable">invoker</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Invoker</span>();<br><br>        invoker.setCommand(command);<br>        invoker.executeCommand();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="7、备忘录模式"><a href="#7、备忘录模式" class="headerlink" title="7、备忘录模式"></a>7、备忘录模式</h4><p>允许在不暴露对象实现细节的情况下保存和恢复对象的内部状态。备忘录模式通常用于需要记录对象状态历史、撤销操作或者提供快照功能的场景。</p>
<p>备忘录模式包含以下几个角色：</p>
<ol>
<li><strong>发起人（Originator）</strong>：负责创建备忘录对象，以保存当前内部状态，并可以使用备忘录对象恢复内部状态。</li>
<li><strong>备忘录（Memento）</strong>：负责存储发起人对象的内部状态。</li>
<li><strong>管理者（Caretaker）</strong>：负责管理备忘录对象，可以保存和获取备忘录对象，并通知发起人对象。</li>
</ol>
<p>备忘录模式通常适用于以下情况：</p>
<ul>
<li>当需要保存和恢复对象的内部状态，同时又不希望暴露对象的实现细节时，可以使用备忘录模式。</li>
<li>当需要提供撤销操作或者历史记录功能时，也可以使用备忘录模式。</li>
</ul>
<p>以下是一个简单的备忘录模式的示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 备忘录类</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Memento</span> &#123;<br>    <span class="hljs-keyword">private</span> String state;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Memento</span><span class="hljs-params">(String state)</span> &#123;<br>        <span class="hljs-built_in">this</span>.state = state;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getState</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> state;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 发起人类</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Originator</span> &#123;<br>    <span class="hljs-keyword">private</span> String state;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setState</span><span class="hljs-params">(String state)</span> &#123;<br>        <span class="hljs-built_in">this</span>.state = state;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getState</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> state;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> Memento <span class="hljs-title function_">saveStateToMemento</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Memento</span>(state);<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">getStateFromMemento</span><span class="hljs-params">(Memento memento)</span> &#123;<br>        state = memento.getState();<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 管理者类</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Caretaker</span> &#123;<br>    <span class="hljs-keyword">private</span> Memento memento;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">saveMemento</span><span class="hljs-params">(Memento memento)</span> &#123;<br>        <span class="hljs-built_in">this</span>.memento = memento;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> Memento <span class="hljs-title function_">getMemento</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> memento;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 客户端</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Originator</span> <span class="hljs-variable">originator</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Originator</span>();<br>        <span class="hljs-type">Caretaker</span> <span class="hljs-variable">caretaker</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Caretaker</span>();<br><br>        <span class="hljs-comment">// 修改发起人状态并保存备忘录</span><br>        originator.setState(<span class="hljs-string">&quot;State 1&quot;</span>);<br>        <span class="hljs-type">Memento</span> <span class="hljs-variable">memento</span> <span class="hljs-operator">=</span> originator.saveStateToMemento();<br>        caretaker.saveMemento(memento);<br><br>        <span class="hljs-comment">// 修改发起人状态</span><br>        originator.setState(<span class="hljs-string">&quot;State 2&quot;</span>);<br><br>        <span class="hljs-comment">// 恢复发起人状态</span><br>        <span class="hljs-type">Memento</span> <span class="hljs-variable">savedMemento</span> <span class="hljs-operator">=</span> caretaker.getMemento();<br>        originator.getStateFromMemento(savedMemento);<br>        System.out.println(<span class="hljs-string">&quot;Restored State: &quot;</span> + originator.getState());<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="8、状态模式"><a href="#8、状态模式" class="headerlink" title="8、状态模式"></a>8、状态模式</h4><p>允许对象在内部状态改变时改变它的行为，看起来好像改变了它的类。状态模式将每个状态封装成一个类，并将对象的行为委托给当前状态对象。</p>
<p>状态模式包含以下几个角色：</p>
<ol>
<li><strong>上下文（Context）</strong>：定义客户端感兴趣的接口，维护一个对状态对象的引用，并将请求委托给当前状态对象处理。</li>
<li><strong>抽象状态（State）</strong>：定义一个接口以封装与上下文的一个特定状态相关的行为。</li>
<li><strong>具体状态（Concrete State）</strong>：实现抽象状态定义的接口，并且负责处理状态相关的行为。</li>
</ol>
<p>状态模式通常适用于以下情况：</p>
<ul>
<li>当对象的行为取决于它的状态，并且在运行时可以根据状态改变行为时，可以使用状态模式。</li>
<li>当有大量的条件语句来控制一个对象的行为时，可以使用状态模式来提高代码的可维护性。</li>
</ul>
<p>以下是一个简单的状态模式的示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 上下文</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Context</span> &#123;<br>    <span class="hljs-keyword">private</span> State state;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setState</span><span class="hljs-params">(State state)</span> &#123;<br>        <span class="hljs-built_in">this</span>.state = state;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">request</span><span class="hljs-params">()</span> &#123;<br>        state.handleRequest(<span class="hljs-built_in">this</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 抽象状态</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">State</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleRequest</span><span class="hljs-params">(Context context)</span>;<br>&#125;<br><br><span class="hljs-comment">// 具体状态A</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteStateA</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">State</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleRequest</span><span class="hljs-params">(Context context)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Handling request in State A&quot;</span>);<br>        context.setState(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcreteStateB</span>());<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 具体状态B</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteStateB</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">State</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">handleRequest</span><span class="hljs-params">(Context context)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;Handling request in State B&quot;</span>);<br>        context.setState(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcreteStateA</span>());<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 客户端</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">Context</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Context</span>();<br>        context.setState(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcreteStateA</span>());<br><br>        context.request();<br>        context.request();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="9、访问者模式"><a href="#9、访问者模式" class="headerlink" title="9、访问者模式"></a>9、访问者模式</h4><p>访问者模式能够将算法与对象结构分离开来，使得可以在不改变对象结构的情况下定义新的操作。访问者模式的核心思想是在不改变元素的类的前提下，通过定义访问者类来对元素进行操作。</p>
<p>访问者模式包含以下几个角色：</p>
<ol>
<li><strong>访问者接口（Visitor）</strong>：定义了对每个元素访问的操作，可以在不修改具体元素类的情况下定义新的操作。</li>
<li><strong>具体访问者（Concrete Visitor）</strong>：实现了访问者接口中定义的操作，对元素进行具体的处理。</li>
<li><strong>元素接口（Element）</strong>：定义了一个 <code>accept</code> 方法，该方法接受一个访问者对象作为参数，以便让访问者访问自身。</li>
<li><strong>具体元素（Concrete Element）</strong>：实现了元素接口中的 <code>accept</code> 方法，接受访问者对象的访问，并调用访问者的方法进行处理。</li>
<li><strong>对象结构（Object Structure）</strong>：存储了具体元素对象，提供了接受访问者对象的方法，以便访问者能够遍历访问其中的元素。</li>
</ol>
<p>访问者模式通常适用于以下情况：</p>
<ul>
<li>当一个对象结构包含许多具体类对象，而且需要对这些对象进行不同的操作时，可以使用访问者模式。</li>
<li>当对象的操作需要多次变更，但是对象本身不希望发生变化时，可以使用访问者模式。</li>
</ul>
<p>以下是一个简单的访问者模式的示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 访问者接口</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Visitor</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">visit</span><span class="hljs-params">(ElementA element)</span>;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">visit</span><span class="hljs-params">(ElementB element)</span>;<br>&#125;<br><br><span class="hljs-comment">// 具体访问者A</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteVisitorA</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Visitor</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">visit</span><span class="hljs-params">(ElementA element)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;ConcreteVisitorA visits ElementA&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">visit</span><span class="hljs-params">(ElementB element)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;ConcreteVisitorA visits ElementB&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 具体访问者B</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteVisitorB</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Visitor</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">visit</span><span class="hljs-params">(ElementA element)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;ConcreteVisitorB visits ElementA&quot;</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">visit</span><span class="hljs-params">(ElementB element)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;ConcreteVisitorB visits ElementB&quot;</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 元素接口</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Element</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">accept</span><span class="hljs-params">(Visitor visitor)</span>;<br>&#125;<br><br><span class="hljs-comment">// 具体元素A</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ElementA</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Element</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">accept</span><span class="hljs-params">(Visitor visitor)</span> &#123;<br>        visitor.visit(<span class="hljs-built_in">this</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 具体元素B</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ElementB</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Element</span> &#123;<br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">accept</span><span class="hljs-params">(Visitor visitor)</span> &#123;<br>        visitor.visit(<span class="hljs-built_in">this</span>);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 对象结构</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ObjectStructure</span> &#123;<br>    <span class="hljs-keyword">private</span> List&lt;Element&gt; elements = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">attach</span><span class="hljs-params">(Element element)</span> &#123;<br>        elements.add(element);<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">detach</span><span class="hljs-params">(Element element)</span> &#123;<br>        elements.remove(element);<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">accept</span><span class="hljs-params">(Visitor visitor)</span> &#123;<br>        <span class="hljs-keyword">for</span> (Element element : elements) &#123;<br>            element.accept(visitor);<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 客户端</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">ObjectStructure</span> <span class="hljs-variable">objectStructure</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectStructure</span>();<br>        objectStructure.attach(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ElementA</span>());<br>        objectStructure.attach(<span class="hljs-keyword">new</span> <span class="hljs-title class_">ElementB</span>());<br><br>        <span class="hljs-type">Visitor</span> <span class="hljs-variable">visitorA</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcreteVisitorA</span>();<br>        objectStructure.accept(visitorA);<br><br>        <span class="hljs-type">Visitor</span> <span class="hljs-variable">visitorB</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcreteVisitorB</span>();<br>        objectStructure.accept(visitorB);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="10、中介者模式"><a href="#10、中介者模式" class="headerlink" title="10、中介者模式"></a>10、中介者模式</h4><p>中介者模式通过封装一系列对象之间的交互方式，来减少对象之间的直接依赖关系，从而降低系统的耦合性。中介者模式将系统中各个对象之间的交互行为集中到中介者对象中进行处理，而不是让对象之间相互引用。</p>
<p>中介者模式包含以下几个角色：</p>
<ol>
<li><strong>中介者（Mediator）</strong>：定义了一个接口用于与各个同事对象进行通信，可以通过该接口将具体同事对象的通知传递给其他同事对象。</li>
<li><strong>具体中介者（Concrete Mediator）</strong>：实现了中介者接口，负责协调各个同事对象的交互行为。</li>
<li><strong>同事类（Colleague）</strong>：定义了一个接口用于与中介者进行通信，每个同事对象都知道中介者对象，并可以通过中介者来通知其他同事对象。</li>
<li><strong>具体同事类（Concrete Colleague）</strong>：实现了同事接口，每个具体同事类都知道自己的中介者对象，并通过中介者对象来与其他同事对象进行通信。</li>
</ol>
<p>中介者模式通常适用于以下情况：</p>
<ul>
<li>当对象之间存在复杂的交互关系，并且导致对象之间紧密耦合时，可以使用中介者模式来解耦对象之间的关系。</li>
<li>当一个对象行为发生改变可能会影响到其他对象，但又不希望对象之间直接耦合时，可以使用中介者模式。</li>
</ul>
<p>以下是一个简单的中介者模式的示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 中介者接口</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Mediator</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">send</span><span class="hljs-params">(String message, Colleague colleague)</span>;<br>&#125;<br><br><span class="hljs-comment">// 具体中介者</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteMediator</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Mediator</span> &#123;<br>    <span class="hljs-keyword">private</span> Colleague colleague1;<br>    <span class="hljs-keyword">private</span> Colleague colleague2;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setColleague1</span><span class="hljs-params">(Colleague colleague)</span> &#123;<br>        <span class="hljs-built_in">this</span>.colleague1 = colleague;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setColleague2</span><span class="hljs-params">(Colleague colleague)</span> &#123;<br>        <span class="hljs-built_in">this</span>.colleague2 = colleague;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">send</span><span class="hljs-params">(String message, Colleague colleague)</span> &#123;<br>        <span class="hljs-keyword">if</span> (colleague == colleague1) &#123;<br>            colleague2.receive(message);<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>            colleague1.receive(message);<br>        &#125;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 同事接口</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Colleague</span> &#123;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">send</span><span class="hljs-params">(String message)</span>;<br>    <span class="hljs-keyword">void</span> <span class="hljs-title function_">receive</span><span class="hljs-params">(String message)</span>;<br>&#125;<br><br><span class="hljs-comment">// 具体同事类A</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteColleagueA</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Colleague</span> &#123;<br>    <span class="hljs-keyword">private</span> Mediator mediator;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ConcreteColleagueA</span><span class="hljs-params">(Mediator mediator)</span> &#123;<br>        <span class="hljs-built_in">this</span>.mediator = mediator;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">send</span><span class="hljs-params">(String message)</span> &#123;<br>        mediator.send(message, <span class="hljs-built_in">this</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">receive</span><span class="hljs-params">(String message)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;ConcreteColleagueA received: &quot;</span> + message);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 具体同事类B</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">ConcreteColleagueB</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Colleague</span> &#123;<br>    <span class="hljs-keyword">private</span> Mediator mediator;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">ConcreteColleagueB</span><span class="hljs-params">(Mediator mediator)</span> &#123;<br>        <span class="hljs-built_in">this</span>.mediator = mediator;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">send</span><span class="hljs-params">(String message)</span> &#123;<br>        mediator.send(message, <span class="hljs-built_in">this</span>);<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">receive</span><span class="hljs-params">(String message)</span> &#123;<br>        System.out.println(<span class="hljs-string">&quot;ConcreteColleagueB received: &quot;</span> + message);<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 客户端</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">ConcreteMediator</span> <span class="hljs-variable">mediator</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcreteMediator</span>();<br><br>        <span class="hljs-type">ConcreteColleagueA</span> <span class="hljs-variable">colleagueA</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcreteColleagueA</span>(mediator);<br>        <span class="hljs-type">ConcreteColleagueB</span> <span class="hljs-variable">colleagueB</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ConcreteColleagueB</span>(mediator);<br><br>        mediator.setColleague1(colleagueA);<br>        mediator.setColleague2(colleagueB);<br><br>        colleagueA.send(<span class="hljs-string">&quot;Hello from ColleagueA&quot;</span>);<br>        colleagueB.send(<span class="hljs-string">&quot;Hi from ColleagueB&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h4 id="11、解释器模式"><a href="#11、解释器模式" class="headerlink" title="11、解释器模式"></a>11、解释器模式</h4><p>解释器模式定义一种语言的文法，并且构建一个解释器来解释这个语言中的句子。解释器模式通常用于处理复杂的语法或规则，它将一个表达式解析成一个抽象语法树，并提供一种灵活的方式来进行解释、执行或操作。</p>
<p>解释器模式包含以下几个角色：</p>
<ol>
<li><strong>抽象表达式（Abstract Expression）</strong>：定义了一个抽象的解释操作，通常包含一个 <code>interpret()</code> 方法，用于解释表达式。</li>
<li><strong>终结符表达式（Terminal Expression）</strong>：实现了抽象表达式接口，表示语法中的终结符，不再包含子表达式。</li>
<li><strong>非终结符表达式（Nonterminal Expression）</strong>：实现了抽象表达式接口，表示语法中的非终结符，通常包含多个子表达式。</li>
<li><strong>上下文（Context）</strong>：包含解释器之外的一些全局信息，通常被解释器用来保存解释器中间结果或者共享信息。</li>
</ol>
<p>解释器模式通常适用于以下情况：</p>
<ul>
<li>当有一个语言需要解释执行，并且可以将该语言的语法表示为一个表达式文法树时，可以使用解释器模式。</li>
<li>当需要按照特定的规则进行解析语言或表达式时，可以使用解释器模式。</li>
</ul>
<p>以下是一个简单的解释器模式的示例：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-comment">// 抽象表达式</span><br><span class="hljs-keyword">interface</span> <span class="hljs-title class_">Expression</span> &#123;<br>    <span class="hljs-type">int</span> <span class="hljs-title function_">interpret</span><span class="hljs-params">()</span>;<br>&#125;<br><br><span class="hljs-comment">// 终结符表达式</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">NumberExpression</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Expression</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> number;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">NumberExpression</span><span class="hljs-params">(<span class="hljs-type">int</span> number)</span> &#123;<br>        <span class="hljs-built_in">this</span>.number = number;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">interpret</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> number;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 非终结符表达式</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">AddExpression</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Expression</span> &#123;<br>    <span class="hljs-keyword">private</span> Expression left;<br>    <span class="hljs-keyword">private</span> Expression right;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">AddExpression</span><span class="hljs-params">(Expression left, Expression right)</span> &#123;<br>        <span class="hljs-built_in">this</span>.left = left;<br>        <span class="hljs-built_in">this</span>.right = right;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">interpret</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> left.interpret() + right.interpret();<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 上下文</span><br><span class="hljs-keyword">class</span> <span class="hljs-title class_">Context</span> &#123;<br>    <span class="hljs-keyword">private</span> String input;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> output;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Context</span><span class="hljs-params">(String input)</span> &#123;<br>        <span class="hljs-built_in">this</span>.input = input;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getInput</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> input;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setInput</span><span class="hljs-params">(String input)</span> &#123;<br>        <span class="hljs-built_in">this</span>.input = input;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getOutput</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> output;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setOutput</span><span class="hljs-params">(<span class="hljs-type">int</span> output)</span> &#123;<br>        <span class="hljs-built_in">this</span>.output = output;<br>    &#125;<br>&#125;<br><br><span class="hljs-comment">// 客户端</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Client</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">// 构建解释器上下文</span><br>        <span class="hljs-type">Context</span> <span class="hljs-variable">context</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Context</span>(<span class="hljs-string">&quot;1+2+3&quot;</span>);<br><br>        <span class="hljs-comment">// 解析表达式</span><br>        <span class="hljs-type">Expression</span> <span class="hljs-variable">expression</span> <span class="hljs-operator">=</span> parseExpression(context.getInput());<br><br>        <span class="hljs-comment">// 执行解释器</span><br>        context.setOutput(expression.interpret());<br><br>        <span class="hljs-comment">// 输出结果</span><br>        System.out.println(context.getOutput());<br>    &#125;<br><br>    <span class="hljs-comment">// 解析表达式</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> Expression <span class="hljs-title function_">parseExpression</span><span class="hljs-params">(String input)</span> &#123;<br>        String[] tokens = input.split(<span class="hljs-string">&quot;\\+&quot;</span>);<br>        <span class="hljs-type">Expression</span> <span class="hljs-variable">expression</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br><br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; tokens.length; i++) &#123;<br>            <span class="hljs-keyword">if</span> (expression == <span class="hljs-literal">null</span>) &#123;<br>                expression = <span class="hljs-keyword">new</span> <span class="hljs-title class_">NumberExpression</span>(Integer.parseInt(tokens[i]));<br>            &#125; <span class="hljs-keyword">else</span> &#123;<br>                expression = <span class="hljs-keyword">new</span> <span class="hljs-title class_">AddExpression</span>(expression, <span class="hljs-keyword">new</span> <span class="hljs-title class_">NumberExpression</span>(Integer.parseInt(tokens[i])));<br>            &#125;<br>        &#125;<br><br>        <span class="hljs-keyword">return</span> expression;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" class="category-chain-item">设计模式</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" class="print-no-link">#设计模式</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>designModel</div>
      <div>http://myhikari.github.io/2024/04/25/designModel/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>myHikari</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2024年4月25日</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>许可协议</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - 署名">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2024/04/25/Spring/" title="Spring">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Spring</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2024/04/24/jvm/" title="Jvm">
                        <span class="hidden-mobile">Jvm</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
